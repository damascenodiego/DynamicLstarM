s0@f0 -- a@f0 / 0 -> s0@f0
s0@f0 -- a1@f1 / 0 -> s1@f1
s1@f1 -- a2@f2 / 0 -> s2@f2
s1@f1 -- a@f1 / 1 -> s0@f0
s2@f2 -- a@f2 / 1 -> s1@f1
s1@f1 -- b@f1 / o1 -> s1@f1
s2@f2 -- b@f2 / o2 -> s2@f2
